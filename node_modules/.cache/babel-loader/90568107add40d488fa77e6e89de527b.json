{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Personal\\\\Learning\\\\ReactNative\\\\react-expense\\\\src\\\\components\\\\Tracker\\\\Tracker.js\";\nimport React, { Component } from 'react';\nimport './Tracker.css';\nimport fire from '../../config/Fire';\nimport Transaction from './Transaction/Transaction';\n\nclass Tracker extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      transactions: [],\n      money: 0,\n      transactionName: '',\n      transactionType: '',\n      paymentType: '',\n      price: '',\n      currentUID: fire.auth().currentUser.uid\n    };\n\n    this.logout = () => {\n      fire.auth().signOut();\n    };\n\n    this.handleChange = input => e => {\n      this.setState({\n        [input]: e.target.value !== \"0\" ? e.target.value : \"\"\n      });\n    };\n\n    this.addNewTransaction = () => {\n      const {\n        transactionName,\n        transactionType,\n        paymentType,\n        price,\n        currentUID,\n        money\n      } = this.state; // validation\n\n      if (transactionName && transactionType && paymentType && price) {\n        const BackUpState = this.state.transactions;\n        BackUpState.push({\n          id: BackUpState.length + 1,\n          name: transactionName,\n          type: transactionType,\n          method: paymentType,\n          price: price,\n          user_id: currentUID\n        });\n        fire.database().ref('Transactions/' + currentUID).push({\n          id: BackUpState.length,\n          name: transactionName,\n          type: transactionType,\n          method: paymentType,\n          price: price,\n          user_id: currentUID\n        }).then(data => {\n          //success callback\n          console.log('success callback');\n          this.setState({\n            transactions: BackUpState,\n            money: transactionType === 'deposit' ? money + parseFloat(price) : money - parseFloat(price),\n            transactionName: '',\n            transactionType: '',\n            paymentType: '',\n            price: ''\n          });\n        }).catch(error => {\n          //error callback\n          console.log('error ', error);\n        });\n      }\n    };\n  }\n\n  componentWillMount() {\n    const {\n      currentUID,\n      money\n    } = this.state;\n    let totalMoney = money;\n    const BackUpState = this.state.transactions;\n    fire.database().ref('Transactions/' + currentUID).once('value', snapshot => {\n      // console.log(snapshot);\n      snapshot.forEach(childSnapshot => {\n        totalMoney = childSnapshot.val().type === 'deposit' ? parseFloat(childSnapshot.val().price) + totalMoney : totalMoney - parseFloat(childSnapshot.val().price);\n        BackUpState.push({\n          id: childSnapshot.val().id,\n          name: childSnapshot.val().name,\n          type: childSnapshot.val().type,\n          method: childSnapshot.val().method,\n          price: childSnapshot.val().price,\n          user_id: childSnapshot.val().user_id\n        }); // console.log(childSnapshot.val().name);\n      });\n      this.setState({\n        transactions: BackUpState,\n        money: totalMoney\n      });\n    });\n  }\n\n  render() {\n    var currentUser = fire.auth().currentUser;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"trackerBlock\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"welcome\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Hi, \", currentUser.displayName, \"!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"exit\",\n          onClick: this.logout,\n          children: \"Exit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"totalMoney\",\n        children: [\"Rs.\", this.state.money]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"newTransactionBlock\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"newTransaction\",\n          children: [/*#__PURE__*/_jsxDEV(\"form\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              onChange: this.handleChange('transactionName'),\n              value: this.state.transactionName,\n              placeholder: \"Transaction Name\",\n              type: \"text\",\n              name: \"transactionName\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"inputGroup\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"type\",\n                onChange: this.handleChange('transactionType'),\n                value: this.state.transactionType,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"0\",\n                  children: \"Type\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"expense\",\n                  children: \"Expense\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"deposit\",\n                  children: \"Deposit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                onChange: this.handleChange('price'),\n                value: this.state.price,\n                placeholder: \"Price\",\n                type: \"text\",\n                name: \"price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"inputGroup\",\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"method\",\n                onChange: this.handleChange('paymentType'),\n                value: this.state.paymentType,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"0\",\n                  children: \"Method\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"GPpay\",\n                  children: \"GPay\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"PhonePe\",\n                  children: \"PhonePe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"PayTM\",\n                  children: \"PayTM\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Cash\",\n                  children: \"Cash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Online\",\n                  children: \"Online\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => this.addNewTransaction(),\n            className: \"addTransaction\",\n            children: \"+ Add Transaction\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"latestTransactions\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Latest Transactions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: Object.keys(this.state.transactions).map(id => /*#__PURE__*/_jsxDEV(Transaction, {\n            type: this.state.transactions[id].type,\n            method: this.state.transactions[id].method,\n            name: this.state.transactions[id].name,\n            price: this.state.transactions[id].price\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Tracker;","map":{"version":3,"sources":["C:/Personal/Learning/ReactNative/react-expense/src/components/Tracker/Tracker.js"],"names":["React","Component","fire","Transaction","Tracker","state","transactions","money","transactionName","transactionType","paymentType","price","currentUID","auth","currentUser","uid","logout","signOut","handleChange","input","e","setState","target","value","addNewTransaction","BackUpState","push","id","length","name","type","method","user_id","database","ref","then","data","console","log","parseFloat","catch","error","componentWillMount","totalMoney","once","snapshot","forEach","childSnapshot","val","render","displayName","Object","keys","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './Tracker.css';\nimport fire from '../../config/Fire';\nimport Transaction from './Transaction/Transaction';\n\nclass Tracker extends Component {\n\n    state = {\n        transactions: [],\n        money: 0,\n\n        transactionName: '',\n        transactionType: '',\n        paymentType : '',\n        price: '',\n        currentUID: fire.auth().currentUser.uid\n    }\n\n    // logout function\n    logout = () => {\n        fire.auth().signOut();\n    }\n\n    handleChange = input => e => {\n        this.setState({\n            [input]: e.target.value !==\"0\" ? e.target.value : \"\"\n        });\n    }\n\n    // add transaction\n    addNewTransaction = () => {\n        const {transactionName, transactionType, paymentType, price, currentUID, money} = this.state;\n\n        // validation\n        if(transactionName && transactionType && paymentType && price){\n\n            const BackUpState = this.state.transactions;\n            BackUpState.push({\n                id: BackUpState.length + 1,\n                name: transactionName,\n                type: transactionType,\n                method: paymentType,\n                price: price,\n                user_id: currentUID\n            });\n            \n            fire.database().ref('Transactions/' + currentUID).push({\n                id: BackUpState.length,\n                name: transactionName,\n                type: transactionType,\n                method: paymentType,\n                price: price,\n                user_id: currentUID\n            }).then((data) => {\n                //success callback\n                console.log('success callback');\n                this.setState({\n                    transactions: BackUpState,\n                    money: transactionType === 'deposit' ? money + parseFloat(price) : money - parseFloat(price),\n                    transactionName: '',\n                    transactionType: '',\n                    paymentType: '',\n                    price: ''\n                })\n            }).catch((error)=>{\n                //error callback\n                console.log('error ' , error)\n            });\n\n        }\n    }\n\n    componentWillMount(){\n        const {currentUID, money} = this.state;\n        let totalMoney = money;\n        const BackUpState = this.state.transactions;\n        fire.database().ref('Transactions/' + currentUID).once('value',\n        (snapshot) => {\n            // console.log(snapshot);\n            snapshot.forEach((childSnapshot) => {\n\n                totalMoney = \n                    childSnapshot.val().type === 'deposit' ? \n                    parseFloat(childSnapshot.val().price) + totalMoney\n                    : totalMoney - parseFloat(childSnapshot.val().price);\n                \n                BackUpState.push({\n                    id: childSnapshot.val().id,\n                    name: childSnapshot.val().name,\n                    type: childSnapshot.val().type,\n                    method: childSnapshot.val().method,\n                    price: childSnapshot.val().price,\n                    user_id: childSnapshot.val().user_id\n                });\n                // console.log(childSnapshot.val().name);\n            });\n            this.setState({\n                transactions: BackUpState,\n                money: totalMoney\n            });\n        });\n    }\n\n    render(){\n        var currentUser = fire.auth().currentUser;\n        return(\n            <div className=\"trackerBlock\">\n                <div className=\"welcome\">\n                    <span>Hi, {currentUser.displayName}!</span>\n                    <button className=\"exit\" onClick={this.logout}>Exit</button>\n                </div>\n                <div className=\"totalMoney\">Rs.{this.state.money}</div>\n\n                <div className=\"newTransactionBlock\">\n                    <div className=\"newTransaction\">\n                        <form>\n                            <input\n                                onChange={this.handleChange('transactionName')}\n                                value={this.state.transactionName}\n                                placeholder=\"Transaction Name\"\n                                type=\"text\"\n                                name=\"transactionName\"\n                            />\n                            <div className=\"inputGroup\">\n                                <select name=\"type\"\n                                    onChange={this.handleChange('transactionType')}\n                                    value={this.state.transactionType}>\n                                    <option value=\"0\">Type</option>\n                                    <option value=\"expense\">Expense</option>\n                                    <option value=\"deposit\">Deposit</option>\n                                </select>\n                                <input\n                                    onChange={this.handleChange('price')}\n                                    value={this.state.price}\n                                    placeholder=\"Price\"\n                                    type=\"text\"\n                                    name=\"price\"\n                                />\n                            </div>\n                            <div className=\"inputGroup\">\n                                <select name=\"method\"\n                                    onChange={this.handleChange('paymentType')}\n                                    value={this.state.paymentType}>\n                                    <option value=\"0\">Method</option>\n                                    <option value=\"GPpay\">GPay</option>\n                                    <option value=\"PhonePe\">PhonePe</option>\n                                    <option value=\"PayTM\">PayTM</option>\n                                    <option value=\"Cash\">Cash</option>\n                                    <option value=\"Online\">Online</option>\n                                </select>\n                                \n                            </div>\n                        </form>\n                        <button onClick={() => this.addNewTransaction()} className=\"addTransaction\">+ Add Transaction</button>\n                    </div>\n                </div>\n                \n                <div className=\"latestTransactions\">\n                    <p>Latest Transactions</p>\n                    <ul>\n                        {\n                            Object.keys(this.state.transactions).map((id) => (\n                                <Transaction key={id}\n                                    type={this.state.transactions[id].type}\n                                    method={this.state.transactions[id].method}\n                                    name={this.state.transactions[id].name}\n                                    price={this.state.transactions[id].price}\n                                />\n                            ))\n                        }\n                    </ul>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Tracker;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Personal\\\\Learning\\\\ReactNative\\\\react-expense\\\\src\\\\components\\\\Tracker\\\\Tracker.js\";\nimport React, { Component } from 'react';\nimport DatePicker from 'react-native-datepicker';\nimport './Tracker.css';\nimport fire from '../../config/Fire';\nimport Transaction from './Transaction/Transaction';\n\nclass Tracker extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      transactions: [],\n      money: 0,\n      transactionName: '',\n      transactionType: '',\n      paymentType: '',\n      price: '',\n      currentUID: fire.auth().currentUser.uid\n    };\n\n    this.logout = () => {\n      fire.auth().signOut();\n    };\n\n    this.handleChange = input => e => {\n      this.setState({\n        [input]: e.target.value !== \"0\" ? e.target.value : \"\"\n      });\n    };\n\n    this.addNewTransaction = () => {\n      const {\n        dated,\n        transactionName,\n        transactionType,\n        paymentType,\n        price,\n        currentUID,\n        money\n      } = this.state; // validation\n\n      if (dated, transactionName && transactionType && paymentType && price) {\n        const BackUpState = this.state.transactions;\n        BackUpState.push({\n          id: BackUpState.length + 1,\n          date: Date,\n          name: transactionName,\n          type: transactionType,\n          method: paymentType,\n          price: price,\n          user_id: currentUID\n        });\n        fire.database().ref('Transactions/' + currentUID).push({\n          id: BackUpState.length,\n          date: Date,\n          name: transactionName,\n          type: transactionType,\n          method: paymentType,\n          price: price,\n          user_id: currentUID\n        }).then(data => {\n          //success callback\n          console.log('success callback');\n          this.setState({\n            transactions: BackUpState,\n            money: transactionType === 'deposit' ? money + parseFloat(price) : money - parseFloat(price),\n            transactionName: '',\n            transactionType: '',\n            paymentType: '',\n            price: ''\n          });\n        }).catch(error => {\n          //error callback\n          console.log('error ', error);\n        });\n      }\n    };\n  }\n\n  componentWillMount() {\n    const {\n      currentUID,\n      money\n    } = this.state;\n    let totalMoney = money;\n    const BackUpState = this.state.transactions;\n    fire.database().ref('Transactions/' + currentUID).once('value', snapshot => {\n      // console.log(snapshot);\n      snapshot.forEach(childSnapshot => {\n        totalMoney = childSnapshot.val().type === 'deposit' ? parseFloat(childSnapshot.val().price) + totalMoney : totalMoney - parseFloat(childSnapshot.val().price);\n        BackUpState.push({\n          id: childSnapshot.val().id,\n          dated: childSnapshot.val().date,\n          name: childSnapshot.val().name,\n          type: childSnapshot.val().type,\n          method: childSnapshot.val().method,\n          price: childSnapshot.val().price,\n          user_id: childSnapshot.val().user_id\n        }); // console.log(childSnapshot.val().name);\n      });\n      this.setState({\n        transactions: BackUpState,\n        money: totalMoney\n      });\n    });\n  }\n\n  render() {\n    var currentUser = fire.auth().currentUser;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"trackerBlock\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"welcome\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Hi, \", currentUser.displayName, \"!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"exit\",\n          onClick: this.logout,\n          children: \"Exit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"totalMoney\",\n        children: [\"Rs.\", this.state.money]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"newTransactionBlock\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"newTransaction\",\n          children: [/*#__PURE__*/_jsxDEV(\"form\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              onChange: this.handleChange('transactionName'),\n              value: this.state.transactionName,\n              placeholder: \"Transaction Name\",\n              type: \"text\",\n              name: \"transactionName\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"inputGroup\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"type\",\n                onChange: this.handleChange('transactionType'),\n                value: this.state.transactionType,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"0\",\n                  children: \"Type\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"expense\",\n                  children: \"Expense\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"deposit\",\n                  children: \"Deposit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                onChange: this.handleChange('price'),\n                value: this.state.price,\n                placeholder: \"Price\",\n                type: \"text\",\n                name: \"price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"inputGroup\",\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"method\",\n                onChange: this.handleChange('paymentType'),\n                value: this.state.paymentType,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"0\",\n                  children: \"Method\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"GPpay\",\n                  children: \"GPay\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"PhonePe\",\n                  children: \"PhonePe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"PayTM\",\n                  children: \"PayTM\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Cash\",\n                  children: \"Cash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"Online\",\n                  children: \"Online\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => this.addNewTransaction(),\n            className: \"addTransaction\",\n            children: \"+ Add Transaction\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"latestTransactions\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Latest Transactions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: Object.keys(this.state.transactions).map(id => /*#__PURE__*/_jsxDEV(Transaction, {\n            type: this.state.transactions[id].type,\n            method: this.state.transactions[id].method,\n            name: this.state.transactions[id].name,\n            price: this.state.transactions[id].price\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Tracker;","map":{"version":3,"sources":["C:/Personal/Learning/ReactNative/react-expense/src/components/Tracker/Tracker.js"],"names":["React","Component","DatePicker","fire","Transaction","Tracker","state","transactions","money","transactionName","transactionType","paymentType","price","currentUID","auth","currentUser","uid","logout","signOut","handleChange","input","e","setState","target","value","addNewTransaction","dated","BackUpState","push","id","length","date","Date","name","type","method","user_id","database","ref","then","data","console","log","parseFloat","catch","error","componentWillMount","totalMoney","once","snapshot","forEach","childSnapshot","val","render","displayName","Object","keys","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport DatePicker from 'react-native-datepicker';\nimport './Tracker.css';\nimport fire from '../../config/Fire';\nimport Transaction from './Transaction/Transaction';\n\nclass Tracker extends Component {\n\n    state = {\n        transactions: [],\n        money: 0,\n\n        transactionName: '',\n        transactionType: '',\n        paymentType : '',\n        price: '',\n        currentUID: fire.auth().currentUser.uid\n    }\n\n    // logout function\n    logout = () => {\n        fire.auth().signOut();\n    }\n\n    handleChange = input => e => {\n        this.setState({\n            [input]: e.target.value !==\"0\" ? e.target.value : \"\"\n        });\n    }\n\n    // add transaction\n    addNewTransaction = () => {\n        const {dated, transactionName, transactionType, paymentType, price, currentUID, money} = this.state;\n\n        // validation\n        if(dated, transactionName && transactionType && paymentType && price){\n\n            const BackUpState = this.state.transactions;\n            BackUpState.push({\n                id: BackUpState.length + 1,\n                date: Date,\n                name: transactionName,\n                type: transactionType,\n                method: paymentType,\n                price: price,\n                user_id: currentUID\n            });\n            \n            fire.database().ref('Transactions/' + currentUID).push({\n                id: BackUpState.length,\n                date: Date,\n                name: transactionName,\n                type: transactionType,\n                method: paymentType,\n                price: price,\n                user_id: currentUID\n            }).then((data) => {\n                //success callback\n                console.log('success callback');\n                this.setState({\n                    transactions: BackUpState,\n                    money: transactionType === 'deposit' ? money + parseFloat(price) : money - parseFloat(price),\n                    transactionName: '',\n                    transactionType: '',\n                    paymentType: '',\n                    price: ''\n                })\n            }).catch((error)=>{\n                //error callback\n                console.log('error ' , error)\n            });\n\n        }\n    }\n\n    componentWillMount(){\n        const {currentUID, money} = this.state;\n        let totalMoney = money;\n        const BackUpState = this.state.transactions;\n        fire.database().ref('Transactions/' + currentUID).once('value',\n        (snapshot) => {\n            // console.log(snapshot);\n            snapshot.forEach((childSnapshot) => {\n\n                totalMoney = \n                    childSnapshot.val().type === 'deposit' ? \n                    parseFloat(childSnapshot.val().price) + totalMoney\n                    : totalMoney - parseFloat(childSnapshot.val().price);\n                \n                BackUpState.push({\n                    id: childSnapshot.val().id,\n                    dated: childSnapshot.val().date,\n                    name: childSnapshot.val().name,\n                    type: childSnapshot.val().type,\n                    method: childSnapshot.val().method,\n                    price: childSnapshot.val().price,\n                    user_id: childSnapshot.val().user_id\n                });\n                // console.log(childSnapshot.val().name);\n            });\n            this.setState({\n                transactions: BackUpState,\n                money: totalMoney\n            });\n        });\n    }\n\n    render(){\n        var currentUser = fire.auth().currentUser;\n        return(\n            <div className=\"trackerBlock\">\n                <div className=\"welcome\">\n                    <span>Hi, {currentUser.displayName}!</span>\n                    <button className=\"exit\" onClick={this.logout}>Exit</button>\n                </div>\n                <div className=\"totalMoney\">Rs.{this.state.money}</div>\n\n                <div className=\"newTransactionBlock\">\n                    <div className=\"newTransaction\">\n                        <form>\n                            <input\n                                onChange={this.handleChange('transactionName')}\n                                value={this.state.transactionName}\n                                placeholder=\"Transaction Name\"\n                                type=\"text\"\n                                name=\"transactionName\"\n                            />\n                            <div className=\"inputGroup\">\n                                <select name=\"type\"\n                                    onChange={this.handleChange('transactionType')}\n                                    value={this.state.transactionType}>\n                                    <option value=\"0\">Type</option>\n                                    <option value=\"expense\">Expense</option>\n                                    <option value=\"deposit\">Deposit</option>\n                                </select>\n                                <input\n                                    onChange={this.handleChange('price')}\n                                    value={this.state.price}\n                                    placeholder=\"Price\"\n                                    type=\"text\"\n                                    name=\"price\"\n                                />\n                            </div>\n                            <div className=\"inputGroup\">\n                                <select name=\"method\"\n                                    onChange={this.handleChange('paymentType')}\n                                    value={this.state.paymentType}>\n                                    <option value=\"0\">Method</option>\n                                    <option value=\"GPpay\">GPay</option>\n                                    <option value=\"PhonePe\">PhonePe</option>\n                                    <option value=\"PayTM\">PayTM</option>\n                                    <option value=\"Cash\">Cash</option>\n                                    <option value=\"Online\">Online</option>\n                                </select>\n                                \n                            </div>\n                        </form>\n                        <button onClick={() => this.addNewTransaction()} className=\"addTransaction\">+ Add Transaction</button>\n                    </div>\n                </div>\n                \n                <div className=\"latestTransactions\">\n                    <p>Latest Transactions</p>\n                    <ul>\n                        {\n                            Object.keys(this.state.transactions).map((id) => (\n                                <Transaction key={id}\n                                    type={this.state.transactions[id].type}\n                                    method={this.state.transactions[id].method}\n                                    name={this.state.transactions[id].name}\n                                    price={this.state.transactions[id].price}\n                                />\n                            ))\n                        }\n                    </ul>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Tracker;"]},"metadata":{},"sourceType":"module"}